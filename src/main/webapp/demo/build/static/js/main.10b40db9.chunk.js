(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{100:function(e,t,a){},122:function(e,t){e.exports={host:"http://localhost:8080/parkson"}},148:function(e,t,a){e.exports=a(187)},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),s=(a(153),a(94),a(21)),l=a(16),c=a(33),d=a(34),m=a(30),u=a(38),h=a(47),p=a(46),g=a(10),f=a(257),v=a(239),b=a(258),w=a(256),E=a(44),y=a.n(E),C=(a(100),a(122)),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};y.a.post(C.host+"/auth/signin",t).then((function(e){e.data&&e.data.accessToken&&(localStorage.setItem("jwtToken",e.data.accessToken),a.setState({toDashboardPage:!0}))})).catch((function(e){(e.response.data.error||e.response.data.violations)&&a.setState({invalidCredentials:!0})}))},a.state={username:"",password:"",toDashboardPage:!1,invalidCredentials:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.toDashboardPage?r.a.createElement(p.a,{to:"/dashboard"}):r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.state.invalidCredentials&&r.a.createElement(f.a,{class:"alert alert-danger"},"Invalid Username or Password"),r.a.createElement(v.a,{controlId:"username",bsSize:"large"},r.a.createElement(f.a,null,"Username"),r.a.createElement(b.a,{autoFocus:!0,type:"text",value:this.state.username,onChange:this.handleChange})),r.a.createElement(v.a,{controlId:"password",bsSize:"large"},r.a.createElement(f.a,null,"Password"),r.a.createElement(b.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(w.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit"},"Login"),r.a.createElement("div",{class:"text-center"},"Or"),r.a.createElement(h.b,{to:"/register"},r.a.createElement(w.a,{renderAs:"button",block:!0,bsSize:"large"},r.a.createElement("span",null,"Register")))))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};y.a.post(a.state.host+"/auth/signup",t).then((function(e){e.data&&!0===e.data.success&&(localStorage.setItem("jwtToken",e.data.accessToken),a.setState({toLoginPage:!0}))})).catch((function(e){(!1===e.response.data.success||e.response.data.error||e.response.data.violations)&&a.setState({invalidCredentials:!0})}))},a.state={username:"",password:"",toLoginPage:!1,invalidCredentials:!1,host:"http://localhost:8080/parkson"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.toLoginPage?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.state.invalidCredentials&&r.a.createElement(f.a,{class:"alert alert-danger"},"Invalid Username or Password or username is already taken"),r.a.createElement(v.a,{controlId:"username",bsSize:"large"},r.a.createElement(f.a,null,"Username"),r.a.createElement(b.a,{autoFocus:!0,type:"text",value:this.state.username,onChange:this.handleChange})),r.a.createElement(v.a,{controlId:"password",bsSize:"large"},r.a.createElement(f.a,null,"Password"),r.a.createElement(b.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(w.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit"},"Register")))}}]),t}(n.Component),j=a(68),k=a.n(j),N=(r.a.Component,a(91)),x=a(4),A=a(66),I=a(249),P=a(255),B=a(250),T=a(103),M=a(246),D=a(52),L=a(252),z=a(104),F=a(251),W=a(253),H=a(254),R=a(69),_=a(248),J=a(132),U=a.n(J),q=a(134),G=a.n(q),Y=a(133),Q=a.n(Y),V=a(14),X=a(127),$=a.n(X),K=a(111),Z=a(119),ee=a(121),te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthenticated:!1,companies:[],apiBasePoint:"http://localhost:8080/parkson/company/",newCompany:{code:"",name:"",active:"",registerationNumber:"",logo:"",activatedOn:"",codeHris:"",abbreviatedName:"",createdOn:"",createdBy:""},newModal:!1,editCustomerModal:!1,statusOption:[{name:"Active",id:!0},{name:"InActive",id:!1}],validationErrors:""},a.handleChange=function(e){a.state.newCompany.active=e.target.value,a.setState({newCompany:a.state.newCompany})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this._refreshCompanies(),console.log(localStorage.jwtToken),localStorage.jwtToken&&this.setState({isAuthenticated:!0})}},{key:"toggleNewModal",value:function(){this.setState({newModal:!this.state.newModal})}},{key:"addCompany",value:function(){var e=this;y.a.post(this.state.apiBasePoint+"add",this.state.newCompany,{headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken")}}).then((function(t){var a=e.state.company;a.push(t.data),e.setState({company:a,newCompany:{code:"",name:"",active:"",registerationNumber:"",logo:"",activatedOn:"",codeHris:"",abbreviatedName:"",createdOn:"",createdBy:""}})})).catch((function(t){t.response?e.setState({validationErrors:Array.from(t.response.data.violations).map((function(e){return e.message}))}):e.toggleNewModal()}))}},{key:"deleteCompany",value:function(e){var t=this;y.a.delete(this.state.apiBasePoint+"delete/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken")}}).then((function(e){t._refreshCompanies()}))}},{key:"_refreshCompanies",value:function(){var e=this;y.a.get(this.state.apiBasePoint+"all",{headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken")}}).then((function(t){e.setState({companies:t.data})})).catch((function(t){console.log("error "+JSON.stringify(t)),e.setState({isAuthenticated:!1})}))}},{key:"renderOptions",value:function(){return this.state.statusOption.map((function(e,t){return r.a.createElement(K.a,{label:"Select a country",value:e.id},e.name)}))}},{key:"getFileBase64",value:function(e){this.state.newCompany.logo=e.base64,this.setState({newCompany:this.state.newCompany}),console.log("log "+JSON.stringify(this.state.newCompany.logo))}},{key:"render",value:function(){var e,t=this;if(!1===this.state.isAuthenticated)return r.a.createElement(p.a,{to:"/"});var a=Object(A.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",top:100},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}}})),n={filterType:"dropdown",responsive:"scroll",onRowsDelete:function(e){window.confirm("Are you sure you wish to delete this item?")&&(console.log(JSON.stringify(e.data)),e.data.forEach((function(e){var a=t.state.companies[e.rowIndex].code;t.deleteCompany(a)})))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App container"},r.a.createElement("h1",null,"Parkson Companies App"),r.a.createElement(V.a,{className:"my-3",color:"primary",onClick:this.toggleNewModal.bind(this)},"Add New Company"),r.a.createElement(V.e,{isOpen:this.state.newModal,toggle:this.toggleNewModal.bind(this)},r.a.createElement(V.h,{toggle:this.toggleNewModal.bind(this)},"Add a new company"),r.a.createElement("form",{novalidate:!0},r.a.createElement(V.f,null,this.state.validationErrors&&r.a.createElement(f.a,{class:"alert alert-danger"},this.state.validationErrors.map((function(e){return r.a.createElement("li",null,e)}))),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"title"},"Code"),r.a.createElement(V.c,(e={required:!0,id:"title"},Object(g.a)(e,"required",!0),Object(g.a)(e,"value",this.state.newCompany.code),Object(g.a)(e,"onChange",(function(e){var a=t.state.newCompany;a.code=e.target.value,t.setState({newCompany:a})})),e))),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"name"},"Name"),r.a.createElement(V.c,{id:"name",required:!0,value:this.state.newCompany.name,onChange:function(e){var a=t.state.newCompany;a.name=e.target.value,t.setState({newCompany:a})}})),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"rating"},"Registeration Number"),r.a.createElement(V.c,{id:"rating",value:this.state.newCompany.registerationNumber,onChange:function(e){var a=t.state.newCompany;a.registerationNumber=e.target.value,t.setState({newCompany:a})}})),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"rating"},"Logo"),r.a.createElement(k.a,{type:"jpeg",multiple:!1,onDone:this.getFileBase64.bind(this)})),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"rating"},"Code HRIS"),r.a.createElement(V.c,{id:"rating",value:this.state.newCompany.codeHris,onChange:function(e){var a=t.state.newCompany;a.codeHris=e.target.value,t.setState({newCompany:a})}})),r.a.createElement(V.b,null,r.a.createElement(ee.a,{id:"datetime-local",label:"Activated On",type:"datetime-local",defaultValue:"2017-05-24T23:30",value:this.state.newCompany.activatedOn,onChange:function(e){var a=t.state.newCompany;a.activatedOn=e.target.value,t.setState({newCompany:a})},className:a.textField,InputLabelProps:{shrink:!0}})),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"rating"},"Abbreviated Name"),r.a.createElement(V.c,{id:"rating",value:this.state.newCompany.abbreviatedName,onChange:function(e){var a=t.state.newCompany;a.abbreviatedName=e.target.value,t.setState({newCompany:a})}})),r.a.createElement(V.b,null,r.a.createElement(V.d,{for:"status"},"Status"),r.a.createElement(Z.a,{className:"width50",value:this.state.selected,onChange:this.handleChange},this.renderOptions()))),r.a.createElement(V.g,null,r.a.createElement(V.a,{color:"primary",onClick:this.addCompany.bind(this)},"Save")," ",r.a.createElement(V.a,{color:"secondary",onClick:this.toggleNewModal.bind(this)},"Cancel")))),r.a.createElement($.a,{title:"Companies List",data:this.state.companies,columns:[{name:"Code",field:"code"},{name:"Name",field:"name"},{name:"Last Modified By",field:"lastModifiedBy"},{name:"Last Modified On",field:"lastModifiedOn"}],options:n})))}}]),t}(n.Component),ae=a(202),ne=a(247),re=a(113),oe=a(131),ie=a.n(oe),se=r.a.createElement("div",null,r.a.createElement(ae.a,{button:!0},r.a.createElement(ne.a,null,r.a.createElement(ie.a,null)),r.a.createElement(re.a,{primary:"Dashboard"})));function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function de(){return r.a.createElement(D.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(_.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var me=Object(A.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:ce({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(g.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:150}}}));function ue(e){var t=me(),a=r.a.useState(!0),n=Object(N.a)(a,2),o=n[0],i=n[1],s=r.a.useState(!1),l=Object(N.a)(s,2),c=(l[0],l[1]);Object(x.a)(t.paper,t.fixedHeight);return r.a.createElement("div",{className:t.root},r.a.createElement(I.a,null),r.a.createElement(B.a,{position:"absolute",className:Object(x.a)(t.appBar,o&&t.appBarShift)},r.a.createElement(T.a,{className:t.toolbar},r.a.createElement(z.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},className:Object(x.a)(t.menuButton,o&&t.menuButtonHidden)},r.a.createElement(U.a,null)),r.a.createElement(D.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Dashboard"),r.a.createElement(z.a,{color:"inherit"},r.a.createElement(F.a,null,r.a.createElement(Q.a,{onClick:function(){localStorage.removeItem("jwtToken"),c(!1),e.history.push("")}}))))),r.a.createElement(P.a,{variant:"permanent",classes:{paper:Object(x.a)(t.drawerPaper,!o&&t.drawerPaperClose)},open:o},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(z.a,{onClick:function(){i(!1)}},r.a.createElement(G.a,null))),r.a.createElement(L.a,null),r.a.createElement(M.a,null,se)),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(W.a,{maxWidth:"lg",className:t.container},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(R.a,{className:t.paper},r.a.createElement(te,null)))),r.a.createElement(de,null)))}var he=a(135),pe=a(23),ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).idleTimer=null,a.onAction=a._onAction.bind(Object(m.a)(a)),a.onActive=a._onActive.bind(Object(m.a)(a)),a.onIdle=a._onIdle.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Object(pe.a)();return r.a.createElement(h.a,{history:t,basename:"/parkson"},r.a.createElement("div",{className:"app"},r.a.createElement(he.a,{ref:function(t){e.idleTimer=t},element:document,onActive:this.onActive,onIdle:function(){return e.onIdle(t)},onAction:this.onAction,debounce:250,timeout:6e5}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:O}),r.a.createElement(p.b,{path:"/dashboard",component:ue}),r.a.createElement(p.b,{path:"/register",component:S}))))}},{key:"_onAction",value:function(e){}},{key:"_onActive",value:function(e){}},{key:"_onIdle",value:function(e){localStorage.jwtToken&&(localStorage.removeItem("jwtToken"),e.push(""))}}]),t}(n.Component),fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(ge,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/parkson/demo/build",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/parkson/demo/build","/service-worker.js");fe?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ve(e)}))}}()},94:function(e,t,a){}},[[148,1,2]]]);
//# sourceMappingURL=main.10b40db9.chunk.js.map